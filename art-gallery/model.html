<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>유치원 급식사생대회 3D 전시장</title>
    <link rel="stylesheet" href="./css/style.css">
    <link href="../assets/css/index.css" rel="stylesheet"/>
    <link rel="stylesheet" href="../assets/css/prize_sector.css">
    <style>
        .comment-content,
        .comment-date {
            text-align: left;
        }

        /* 뒤로가기 버튼 스타일 */
        #back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        #back-button:hover {
            background: rgba(255, 255, 255, 1);
        }

        /* 화살표 아이콘 */
        .arrow-icon {
            width: 0;
            height: 0;
            border-top: 10px solid transparent;
            border-bottom: 10px solid transparent;
            border-right: 15px solid #333;
        }

        /* 심플한 로딩 화면 스타일 */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #f8f9fa;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: #333;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            opacity: 1;
            transition: opacity 0.5s ease-out;
        }

        #loading-screen.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        .loading-title {
            font-size: 1.8rem;
            font-weight: 400;
            margin-bottom: 30px;
            color: #555;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #e9ecef;
            border-top: 3px solid #6c757d;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .progress-text {
            font-size: 0.9rem;
            color: #6c757d;
            font-weight: 300;
        }

        /* 모바일 반응형 */
        @media (max-width: 768px) {
            .loading-title {
                font-size: 1.5rem;
            }
            
            .spinner {
                width: 35px;
                height: 35px;
            }

            #back-button {
                width: 45px;
                height: 45px;
                top: 15px;
                left: 15px;
            }

            .arrow-icon {
                border-top: 8px solid transparent;
                border-bottom: 8px solid transparent;
                border-right: 12px solid #333;
            }
        }

        #joystick-knob:active {
            cursor: grabbing;
            transform: translate(-16px,-16px) scale(0.9);
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- 뒤로가기 버튼 -->
    <div id="back-button" onclick="goBack()" title="뒤로가기" aria-label="뒤로가기">
        <div class="arrow-icon"></div>
    </div>

    <!-- 로딩 화면 -->
    <div id="loading-screen">
        <h1 class="loading-title">유치원급식 사생대회</h1>
        <div class="spinner"></div>
        <div class="progress-text" id="progress-text">Loading...</div>
    </div>

    <!-- 갤러리 컨텐츠 -->
    <!-- <div class="background_menu">
        <div id="menu">
            <div id="img_container">
                <img src="./img/test.jpg" alt="menu pic">
            </div>

            <div id="content">
                <h1>유치원급식 사생대회</h1>
                <div>
                    <p> This is an interctive 3D gallery</p>
                    <p> You can view the gallery in 3D and also buy the art pieces</p>
            </div>

            <div>
                <p>Instructions</p>
                <p>Arrow Keys</p>
                <p>Look around with mouse</p>
            </div>

            <div id="play_button">
                <p>Enter The Gallery</p>
            </div> -->
        <!-- </div> -->
        <div id="painting-info"></div>
    </div>

    <script type="importmap">
        {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.173.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.173.0/examples/jsm/"
        }
        }
    </script>

    <script>
        // 뒤로가기 함수
        function goBack() {
            window.location.href = 'https://유치원급식사생대회.com';
        }

        // 로딩 진행률 업데이트 함수
        function updateLoadingProgress(progress) {
            const progressText = document.getElementById('progress-text');
            
            if (progressText) {
                const percentage = Math.round(progress * 100);
                progressText.textContent = `Loading... ${percentage}%`;
            }
        }

        // 로딩 완료 함수
        function hideLoadingScreen() {
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen) {
                loadingScreen.classList.add('fade-out');
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 500);
            }
        }

        // 글로벌 함수로 등록하여 main.js에서 사용할 수 있게 함
        window.updateLoadingProgress = updateLoadingProgress;
        window.hideLoadingScreen = hideLoadingScreen;
    </script>

    <!-- 기존 joystick-container 부분을 이것으로 교체하세요 -->
<div id="joystick-container" style="position:fixed;left:20px;bottom:20px;width:120px;height:120px;z-index:1000;touch-action:none;display:none;">
    <div id="joystick" style="width:80px;height:80px;background:#ffffff;border-radius:50%;position:absolute;left:20px;top:20px;box-shadow:0 2px 8px rgba(0,0,0,0.15);border:2px solid #e0e0e0;"></div>
    <div id="joystick-knob" style="width:32px;height:32px;background:#6366f1;border-radius:50%;position:absolute;left:40px;top:40px;transform:translate(-16px,-16px);cursor:grab;box-shadow:0 2px 6px rgba(99,102,241,0.3);transition:transform 0.1s ease;"></div>
</div>

    <script src="./js/main.js" type="module" defer></script>
</body>

</html>

